"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1762],{94385:(e,t,a)=>{a.d(t,{Y:()=>y});var r=a(95155),s=a(12115),l=a(80780),o=a(42795),n=a(2517),i=a(12408),d=a(14056),c=a(82926),m=a(74585),u=a(80368),x=a(73312),h=a(5900),f=a(21567);let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(h.bL,{ref:t,className:(0,f.cn)("relative flex w-full touch-none select-none items-center",a),...s,children:[(0,r.jsx)(h.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,r.jsx)(h.Q6,{className:"absolute h-full bg-violet-500 dark:bg-violet-400"})}),(0,r.jsx)(h.zi,{className:"block h-4 w-4 rounded-full border border-violet-500/50 bg-white ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-violet-400/50 dark:bg-slate-950"})]})});p.displayName=h.bL.displayName;var g=a(55037),v=a(5565);function y(e){var t;let{audioUrl:a,coverImage:h,title:y,artist:b,onProgress:N,onEnded:j,className:w,post:k}=e,[_,C]=(0,s.useState)(!1),[R,A]=(0,s.useState)(.7),[z,F]=(0,s.useState)(!1),[S,E]=(0,s.useState)(0),[P,M]=(0,s.useState)(0),[$,L]=(0,s.useState)(!1),U=(0,s.useRef)(null),T=(0,s.useRef)(null);(0,s.useCallback)(async()=>{if(U.current)try{await U.current.play(),C(!0)}catch(e){console.error("Error playing audio:",e)}},[]),(0,s.useCallback)(()=>{U.current&&(U.current.pause(),C(!1))},[]),(0,s.useEffect)(()=>{U.current&&(U.current.volume=R)},[R]),(0,s.useEffect)(()=>{if(a)return(async()=>{if(U.current)try{L(!1),C(!1),M(0),E(0),U.current.src=a,U.current.load(),await new Promise(e=>{U.current.addEventListener("loadedmetadata",e,{once:!0})}),L(!0)}catch(e){console.error("Audio loading error:",e),g.oR.error("Failed to load audio")}})(),()=>{U.current&&(U.current.pause(),U.current.src="")}},[a]),(0,s.useEffect)(()=>()=>{T.current&&cancelAnimationFrame(T.current)},[]);let V=e=>{if(!isFinite(e))return"0:00";let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))},D=async()=>{if($&&U.current)try{_?await U.current.pause():(U.current.ended&&(U.current.currentTime=0),await U.current.play()),C(!_)}catch(e){console.error("Audio playback error:",e),g.oR.error("Failed to play audio")}},q=e=>{U.current&&(U.current.currentTime+=e)},B=e=>{let t=e.target;console.error("Audio error:",{src:t.src,error:t.error}),L(!1),g.oR.error("Failed to load audio")};return(0,r.jsxs)("div",{className:(0,f.cn)("w-full rounded-xl overflow-hidden","bg-gradient-to-br from-slate-100 to-white dark:from-slate-900 dark:to-slate-800","border border-slate-200 dark:border-slate-700/50","shadow-xl shadow-slate-200/20 dark:shadow-slate-900/20",w),children:[h&&(0,r.jsxs)("div",{className:"relative w-full aspect-video",children:[(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)(v.default,{src:h,alt:y,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 50vw",onError:()=>{"/images/default-music-cover.jpg"!==h&&console.error("Image failed to load, using fallback")}})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/30"})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:y||"Now Playing"}),(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:b||((null==k?void 0:null===(t=k.author)||void 0===t?void 0:t.username)?"@".concat(k.author.username):"Unknown Artist")})]}),(0,r.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,r.jsx)(p,{value:[P],min:0,max:S||100,step:.1,onValueChange:e=>{let t=e[0];if(isFinite(t)&&U.current&&isFinite(U.current.duration))try{let e=Math.max(0,Math.min(t,U.current.duration));U.current.currentTime=e,M(e)}catch(e){console.error("Error setting audio time:",e)}},className:"cursor-pointer"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[(0,r.jsx)("span",{children:V(P)}),(0,r.jsx)("span",{children:V(S)})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.$,{variant:"ghost",size:"icon",onClick:()=>q(-10),className:"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white",children:(0,r.jsx)(l.A,{className:"h-5 w-5"})}),(0,r.jsx)(x.$,{size:"icon",onClick:D,disabled:!$,className:(0,f.cn)("h-10 w-10 rounded-xl","bg-gradient-to-br from-violet-500 to-violet-600","hover:from-violet-600 hover:to-violet-700","text-white shadow-lg shadow-violet-500/25","disabled:opacity-50 disabled:cursor-not-allowed"),children:_?(0,r.jsx)(o.A,{className:"h-5 w-5"}):(0,r.jsx)(n.A,{className:"h-5 w-5"})}),(0,r.jsx)(x.$,{variant:"ghost",size:"icon",onClick:()=>q(10),className:"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white",children:(0,r.jsx)(i.A,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.$,{variant:"ghost",size:"icon",onClick:()=>{U.current&&(U.current.muted=!z,F(!z))},className:"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white",children:z?(0,r.jsx)(d.A,{className:"h-5 w-5"}):(0,r.jsx)(c.A,{className:"h-5 w-5"})}),(0,r.jsx)("div",{className:"w-20",children:(0,r.jsx)(p,{value:[z?0:100*R],min:0,max:100,step:1,onValueChange:e=>{let t=e[0]/100;A(t),U.current&&(U.current.volume=t,F(0===t))}})}),(0,r.jsx)(x.$,{variant:"ghost",size:"icon",className:"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})}),(0,r.jsx)(x.$,{variant:"ghost",size:"icon",className:"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white",children:(0,r.jsx)(u.A,{className:"h-5 w-5"})})]})]})]}),(0,r.jsx)("audio",{ref:U,onTimeUpdate:()=>{if(U.current){let e=U.current.currentTime,t=U.current.duration;isFinite(e)&&isFinite(t)&&(M(e),E(t),N&&N(e/t),e>=t&&(C(!1),j&&j()))}},onLoadedMetadata:()=>{if(U.current){let e=U.current.duration;isFinite(e)&&(E(e),L(!0),U.current.preload="auto")}},onEnded:()=>{C(!1),j&&j()},onError:e=>B(e.nativeEvent),preload:"auto",crossOrigin:"anonymous"})]})}},1762:(e,t,a)=>{a.d(t,{R:()=>q});var r=a(95155),s=a(12115),l=a(99219),o=a(25683),n=a(76046),i=a(80368),d=a(96758),c=a(69553),m=a(20687),u=a(18833),x=a(7893),h=a(30037),f=a(22783),p=a(8810),g=a(35524),v=a(35055),y=a(73312),b=a(25121),N=a(80937),j=a(15325),w=a(27193),k=a(81703),_=a(21567);let C=N.bL,R=N.l9;N.YJ,N.ZL,N.Pb,N.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:l,...o}=e;return(0,r.jsxs)(N.ZP,{ref:t,className:(0,_.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...o,children:[l,(0,r.jsx)(j.A,{className:"ml-auto h-4 w-4"})]})}).displayName=N.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.G5,{ref:t,className:(0,_.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=N.G5.displayName;let A=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(N.ZL,{children:(0,r.jsx)(N.UC,{ref:t,sideOffset:s,className:(0,_.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});A.displayName=N.UC.displayName;let z=s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(N.q7,{ref:t,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...l})});z.displayName=N.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:l,...o}=e;return(0,r.jsxs)(N.H_,{ref:t,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(N.VF,{children:(0,r.jsx)(w.A,{className:"h-4 w-4"})})}),s]})}).displayName=N.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(N.hN,{ref:t,className:(0,_.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(N.VF,{children:(0,r.jsx)(k.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=N.hN.displayName,s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(N.JU,{ref:t,className:(0,_.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...l})}).displayName=N.JU.displayName;let F=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.wv,{ref:t,className:(0,_.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});F.displayName=N.wv.displayName;var S=a(51344),E=a(55037),P=a(5565),M=a(94385),$=a(76390),L=a(42649);let U=e=>e?e.startsWith("http")?e:"".concat("http://localhost:8000").concat(e):null,T=e=>{if(e)return e.startsWith("http")?e:"".concat("http://localhost:8000").concat(e)},V=e=>e?e.startsWith("http")?e:"".concat("http://localhost:8000").concat(e):"",D=e=>"NEWS"===e.type;function q(e){var t;let{post:a,onPostUpdate:N,isLandingPage:j=!1}=e,w=(0,n.useRouter)(),[k,q]=(0,s.useState)(!1),[B,O]=(0,s.useState)(!1),[H,K]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(a),[G,J]=(0,s.useState)(!1),[W,I]=(0,s.useState)(a.is_saved||!1),[Q,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)(!1),[ea,er]=(0,s.useState)(!1),[es,el]=(0,s.useState)(null),[eo,en]=(0,s.useState)(null),[ei,ed]=(0,s.useState)(""),ec=(0,s.useCallback)(async()=>{try{er(!0);let e=await $.M.getComments(Y.id);e.success&&e.data&&K(e.data)}catch(e){console.error("Error loading comments:",e)}finally{er(!1)}},[Y.id]);(0,s.useEffect)(()=>{B&&0===H.length&&ec()},[B,H.length,ec]),(0,s.useEffect)(()=>{Z(a),j||em()},[a,j]);let em=async()=>{try{let e=await L.i$.getProfile();e.success&&el(e.data)}catch(e){console.error("Error loading profile:",e)}},eu=()=>{w.push("/auth/login")},ex=async()=>{if(j){eu();return}if(!k)try{var e;q(!0);let t={...Y,is_liked:!Y.is_liked,likes_count:Y.likes_count+(Y.is_liked?-1:1),trending_data:{...Y.trending_data,like_count:((null===(e=Y.trending_data)||void 0===e?void 0:e.like_count)||0)+(Y.is_liked?-1:1)}};if(Z(t),!(await $.M.likePost(Y.id)).success){Z(Y),E.oR.error("Failed to like post");return}N&&N(t),E.oR.success(t.is_liked?"Post liked":"Post unliked",{icon:t.is_liked?"❤️":"\uD83D\uDC94"})}catch(e){console.error("Like error:",e),Z(Y),E.oR.error("Failed to like post")}finally{q(!1)}},eh=async()=>{if(j){eu();return}try{navigator.share?await navigator.share({title:Y.title,text:Y.description,url:window.location.href}):(await $.M.sharePost(Y.id,"direct")).success&&E.oR.success("Post shared successfully")}catch(e){E.oR.error("Failed to share post")}},ef=()=>{if(j){eu();return}I(!W),E.oR.success(W?"Removed from bookmarks":"Added to bookmarks",{icon:W?"\uD83D\uDDD1️":"\uD83D\uDD16",className:"dark:bg-slate-800 dark:text-white"})},ep=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString()},eg=e=>{let t=Math.floor((new Date().getTime()-new Date(e).getTime())/1e3);for(let[e,a]of Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60})){let r=Math.floor(t/a);if(r>=1)return"".concat(r).concat(e.charAt(0))}return"now"},ev=async()=>{if(j){eu();return}if(O(!B),!B&&0===H.length)try{er(!0);let e=await $.M.getComments(Y.id);e.success&&e.data?K(e.data):E.oR.error("Failed to load comments")}catch(e){console.error("Error loading comments:",e),E.oR.error("Failed to load comments")}finally{er(!1)}},ey=async e=>{var t,a,r;if(e.preventDefault(),Q.trim()&&!ee){if(!es){E.oR.error("Please log in to comment"),w.push("/auth/login");return}try{et(!0);let e=await $.M.addComment(Y.id,{content:Q.trim()});if(e.success&&e.data){K(t=>[e.data,...t]),X("");let a={...Y,comments_count:Y.comments_count+1,trending_data:{...Y.trending_data,comment_count:((null===(t=Y.trending_data)||void 0===t?void 0:t.comment_count)||0)+1}};Z(a),N&&N(a),E.oR.success("Comment added")}else E.oR.error(e.error||"Failed to add comment")}catch(e){console.error("Comment error:",e),E.oR.error((null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error)||"Failed to add comment")}finally{et(!1)}}},eb=async(e,t)=>{try{let a=await $.M.editComment(Y.id,e,t);"success"in a&&a.success?(K(a=>a.map(a=>a.id===e?{...a,content:t}:a)),en(null),ed(""),E.oR.success("Comment updated")):E.oR.error("Failed to update comment")}catch(e){console.error("Edit comment error:",e),E.oR.error("Failed to update comment")}},eN=async e=>{try{let t=await $.M.deleteComment(Y.id,e);"success"in t&&t.success?(K(t=>t.filter(t=>t.id!==e)),Z(e=>({...e,comments_count:e.comments_count-1})),E.oR.success("Comment deleted")):E.oR.error("Failed to delete comment")}catch(e){console.error("Delete comment error:",e),E.oR.error("Failed to delete comment")}};(0,s.useEffect)(()=>{es&&K(e=>e.map(e=>({...e,is_author:e.author.id===es.id})))},[es]);let ej=T(Y.image_url||Y.image),ew=T(Y.cover_image_url||Y.image_url||Y.image);return(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:(0,_.cn)("w-full rounded-2xl overflow-hidden","bg-white dark:bg-gray-800/90","border border-gray-100 dark:border-gray-700/50","shadow-sm hover:shadow-md transition-shadow duration-200","backdrop-blur-xl"),children:[(0,r.jsxs)("div",{className:(0,_.cn)("px-6 py-4 flex items-center justify-between","border-b border-gray-100 dark:border-gray-700/50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(v.eu,{className:(0,_.cn)("h-12 w-12 ring-2 ring-white dark:ring-blue-900","transition-all duration-300","hover:ring-blue-500/50 dark:hover:ring-blue-400/50"),children:[(0,r.jsx)(v.BK,{src:U(Y.author.profile_image||Y.author.avatar)||"",alt:Y.author.username,className:"object-cover"}),(0,r.jsx)(v.q5,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:Y.author.username.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["@",Y.author.username]}),(0,r.jsx)(b.E,{variant:"secondary",className:(0,_.cn)("text-xs font-medium","bg-gray-100 dark:bg-gray-700","text-gray-700 dark:text-gray-100","border-transparent"),children:Y.type}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["• ",eg(Y.created_at)]})]}),(Y.author.first_name||Y.author.last_name)&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[Y.author.first_name,Y.author.last_name].filter(Boolean).join(" ")})]})]}),(0,r.jsxs)(C,{children:[(0,r.jsx)(R,{asChild:!0,children:(0,r.jsx)(y.$,{variant:"ghost",size:"icon",className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:(0,r.jsx)(i.A,{className:"h-5 w-5"})})}),(0,r.jsxs)(A,{align:"end",className:"w-56",children:[(0,r.jsxs)(z,{onClick:()=>{navigator.clipboard.writeText(window.location.href),E.oR.success("Link copied!")},children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Copy link"]}),(0,r.jsxs)(z,{onClick:eh,children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Share post"]}),(0,r.jsxs)(z,{onClick:ef,children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),W?"Remove bookmark":"Save post"]}),(0,r.jsx)(F,{}),(0,r.jsxs)(z,{className:"text-red-500 dark:text-red-400",onClick:()=>E.oR.error("Report submitted"),children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Report post"]})]})]})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4 text-gray-800 dark:text-gray-200",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white leading-tight",children:Y.title}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:Y.description})]}),D(Y)&&ej&&(0,r.jsx)("div",{className:"relative aspect-video",children:(0,r.jsx)("img",{src:ej,alt:Y.title,className:"w-full h-full object-cover rounded-lg"})}),"AUDIO"===Y.type&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(M.Y,{audioUrl:Y.audio_url||"",coverImage:ew,title:Y.title,post:Y})}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)(l.P.button,{whileTap:{scale:.95},onClick:ex,disabled:k,className:(0,_.cn)("flex items-center space-x-2","text-gray-600 dark:text-gray-300","hover:text-red-500 dark:hover:text-red-400","transition-colors duration-200",Y.is_liked&&"text-red-500 dark:text-red-400",k&&"opacity-50 cursor-not-allowed"),children:[(0,r.jsx)(l.P.div,{animate:{scale:Y.is_liked?[1,1.4,1]:1,rotate:Y.is_liked?[0,15,-15,0]:0},transition:{duration:.4},children:(0,r.jsx)(x.A,{className:(0,_.cn)("h-5 w-5",Y.is_liked&&"fill-current")})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:ep(Y.likes_count)})]}),(0,r.jsxs)(y.$,{variant:"ghost",size:"sm",onClick:ev,className:(0,_.cn)("flex items-center space-x-2","text-gray-600 dark:text-gray-300","hover:text-blue-500 dark:hover:text-blue-400","hover:bg-blue-50 dark:hover:bg-blue-900/20",B&&"text-blue-500 dark:text-blue-400"),children:[(0,r.jsx)(h.A,{className:(0,_.cn)("h-5 w-5",B&&"fill-current")}),(0,r.jsx)("span",{className:"text-sm font-medium",children:ep(Y.comments_count)})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.$,{variant:"ghost",size:"icon",onClick:eh,className:"text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400",children:(0,r.jsx)(c.A,{className:"h-5 w-5"})}),(0,r.jsx)(y.$,{variant:"ghost",size:"icon",onClick:ef,className:(0,_.cn)("text-gray-600 dark:text-gray-300","hover:text-blue-500 dark:hover:text-blue-400",W&&"text-blue-500 dark:text-blue-400"),children:(0,r.jsx)(m.A,{className:(0,_.cn)("h-5 w-5",W&&"fill-current")})})]})]})]}),(0,r.jsx)(o.N,{children:B&&(0,r.jsx)(l.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-slate-100 dark:border-slate-800",children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("form",{onSubmit:ey,className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100 dark:border-gray-800",children:[(0,r.jsx)(v.eu,{className:"h-6 w-6",children:(null==es?void 0:es.avatar_url)?(0,r.jsx)(v.BK,{src:V(es.avatar_url),alt:(null==es?void 0:es.username)||"Me",className:"object-cover"}):(0,r.jsx)(v.q5,{className:"text-xs",children:(null==es?void 0:null===(t=es.username)||void 0===t?void 0:t.charAt(0).toUpperCase())||"M"})}),(0,r.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:Q,onChange:e=>X(e.target.value),placeholder:"Add a comment...",className:(0,_.cn)("flex-1 text-sm px-3 py-1 rounded","bg-transparent","text-gray-900 dark:text-white","placeholder:text-gray-400 dark:placeholder:text-gray-500","focus:outline-none")}),(0,r.jsx)(y.$,{size:"sm",variant:"ghost",className:"h-7 text-xs font-medium text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300",disabled:!Q.trim()||ee,children:ee?(0,r.jsx)(f.A,{className:"h-3 w-3 animate-spin"}):"Post"})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:ea?(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-48 bg-gray-100 dark:bg-gray-700/30 rounded-xl mb-4"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-100 dark:bg-gray-700/30 rounded w-3/4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-100 dark:bg-gray-700/30 rounded w-1/2"})]})]}):(0,r.jsxs)(r.Fragment,{children:[H.map(e=>(0,r.jsxs)(l.P.div,{className:"flex space-x-2 mb-2",children:[(0,r.jsxs)(v.eu,{className:"h-6 w-6 flex-shrink-0",children:[(0,r.jsx)(v.BK,{src:V(e.author.avatar),alt:e.author.username}),(0,r.jsx)(v.q5,{className:"text-xs",children:e.author.username.charAt(0).toUpperCase()})]}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:eo===e.id?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("textarea",{value:ei,onChange:e=>ed(e.target.value),className:(0,_.cn)("w-full px-3 py-1 text-sm rounded","bg-gray-50 dark:bg-gray-800","border border-gray-200 dark:border-gray-700","focus:outline-none focus:ring-1 focus:ring-blue-500","resize-none"),rows:2}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(y.$,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>{en(null),ed("")},children:"Cancel"}),(0,r.jsx)(y.$,{size:"sm",className:"h-7 text-xs",onClick:()=>eb(e.id,ei),disabled:!ei.trim()||ei===e.content,children:"Save"})]})]}):(0,r.jsxs)("div",{className:"group flex items-start justify-between gap-x-2",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("span",{className:"font-medium text-sm text-gray-900 dark:text-white mr-2",children:e.author.username}),(0,r.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.content}),(0,r.jsx)("div",{className:"flex items-center gap-2 mt-0.5",children:(0,r.jsx)("span",{className:"text-xs text-gray-500",children:eg(e.created_at)})})]}),e.is_author&&(0,r.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(y.$,{variant:"ghost",size:"icon",onClick:()=>{en(e.id),ed(e.content)},className:"h-6 w-6 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(p.A,{className:"h-3.5 w-3.5"})}),(0,r.jsx)(y.$,{variant:"ghost",size:"icon",onClick:()=>eN(e.id),className:"h-6 w-6 text-gray-400 hover:text-red-500 dark:hover:text-red-400",children:(0,r.jsx)(g.A,{className:"h-3.5 w-3.5"})})]})]})})]},e.id)),0===H.length&&(0,r.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No comments yet. Be the first to comment!"})]})})]})})}),(0,r.jsx)(S.lG,{open:G,onOpenChange:J,children:(0,r.jsx)(S.Cf,{className:"max-w-5xl p-0 overflow-hidden bg-black/95 border-none",children:(0,r.jsx)("div",{className:"relative w-full",style:{paddingTop:"52.5%"},children:ej&&(0,r.jsx)(P.default,{src:ej,alt:Y.title,fill:!0,className:"object-contain",priority:!0,sizes:"100vw",onClick:e=>e.stopPropagation()})})})})]})}},35055:(e,t,a)=>{a.d(t,{BK:()=>i,eu:()=>n,q5:()=>d});var r=a(95155),s=a(12115),l=a(74920),o=a(21567);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.bL,{ref:t,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});n.displayName=l.bL.displayName;let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l._V,{ref:t,className:(0,o.cn)("aspect-square h-full w-full",a),...s})});i.displayName=l._V.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.H4,{ref:t,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});d.displayName=l.H4.displayName},25121:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(95155);a(12115);var s=a(31027),l=a(21567);let o=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)(o({variant:a}),t),...s})}},51344:(e,t,a)=>{a.d(t,{Cf:()=>c,L3:()=>u,c7:()=>m,lG:()=>n});var r=a(95155),s=a(12115),l=a(66217),o=a(21567);let n=l.bL;l.l9;let i=l.ZL;l.bm;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});d.displayName="DialogOverlay";let c=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(i,{children:[(0,r.jsx)(d,{}),(0,r.jsx)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:s})]})});c.displayName="DialogContent";let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});u.displayName=l.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName=l.VY.displayName}}]);