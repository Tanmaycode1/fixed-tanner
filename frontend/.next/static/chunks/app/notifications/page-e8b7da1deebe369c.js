(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6173],{77725:(e,s,a)=>{Promise.resolve().then(a.bind(a,23572))},23572:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var r=a(95155),t=a(12115),l=a(25683),i=a(99219),n=a(76046),d=a(7893),c=a(30037),o=a(24659),m=a(67746),x=a(22783),h=a(87081),f=a(31342),u=a(35524),p=a(689),N=a(15325),j=a(35055),g=a(73312),y=a(21567),b=a(55037),v=a(64414),w=a(42649),k=a(22130),C=a(21868);let _=t.forwardRef((e,s)=>{let{className:a,children:t,...l}=e;return(0,r.jsxs)(C.bL,{ref:s,className:(0,y.cn)("relative overflow-hidden",a),...l,children:[(0,r.jsx)(C.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(R,{}),(0,r.jsx)(C.OK,{})]})});_.displayName=C.bL.displayName;let R=t.forwardRef((e,s)=>{let{className:a,orientation:t="vertical",...l}=e;return(0,r.jsx)(C.VM,{ref:s,orientation:t,className:(0,y.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,r.jsx)(C.lr,{className:"relative flex-1 rounded-full bg-border"})})});R.displayName=C.VM.displayName;var L=a(62884);function A(){let e=(0,n.useRouter)(),[s,a]=(0,t.useState)([]),[C,R]=(0,t.useState)(!0),[A,O]=(0,t.useState)(null),[T,E]=(0,t.useState)("all"),[M,F]=(0,t.useState)(!1),K=(0,t.useCallback)(async()=>{try{R(!0);let e=await w.OT.getNotifications(1,{unread_only:"unread"===T,type:A});e.success&&a(e.data.results)}catch(e){console.error("Error loading notifications:",e),b.oR.error("Failed to load notifications")}finally{R(!1)}},[T,A]);(0,t.useEffect)(()=>{K()},[T,A,K]);let S=async()=>{try{(await w.OT.markAllAsRead()).success&&(a(e=>e.map(e=>({...e,is_read:!0}))),b.oR.success("All notifications marked as read"))}catch(e){console.error("Error marking all as read:",e),b.oR.error("Failed to mark notifications as read")}},U=async()=>{if(confirm("Are you sure you want to delete all notifications? This cannot be undone."))try{(await w.OT.clearAll()).success&&(a([]),b.oR.success("All notifications cleared"))}catch(e){console.error("Error clearing notifications:",e),b.oR.error("Failed to clear notifications")}},$=s.reduce((e,s)=>(e[s.notification_type]=(e[s.notification_type]||0)+1,e),{}),z=s.filter(e=>!e.is_read).length,V=async s=>{try{if(!s.is_read&&(await w.OT.markAsRead(s.id)).success&&a(e=>e.map(e=>e.id===s.id?{...e,is_read:!0}:e)),s.redirect_url)e.push(s.redirect_url);else switch(s.notification_type){case"FOLLOW":e.push("/profile/".concat(s.sender.id));break;case"LIKE":case"COMMENT":var r;(null===(r=s.extra_data)||void 0===r?void 0:r.post_id)&&e.push("/posts/".concat(s.extra_data.post_id))}}catch(e){console.error("Error handling notification click:",e)}},W=e=>{let s={LIKE:{icon:(0,r.jsx)(d.A,{className:"h-4 w-4"}),bgClass:"bg-red-50 dark:bg-red-500/10",textClass:"text-red-500 dark:text-red-400"},COMMENT:{icon:(0,r.jsx)(c.A,{className:"h-4 w-4"}),bgClass:"bg-blue-50 dark:bg-blue-500/10",textClass:"text-blue-500 dark:text-blue-400"},FOLLOW:{icon:(0,r.jsx)(o.A,{className:"h-4 w-4"}),bgClass:"bg-green-50 dark:bg-green-500/10",textClass:"text-green-500 dark:text-green-400"}}[e]||{icon:(0,r.jsx)(m.A,{className:"h-4 w-4"}),bgClass:"bg-gray-50 dark:bg-gray-700",textClass:"text-gray-500 dark:text-gray-400"};return(0,r.jsx)("div",{className:(0,y.cn)("rounded-full p-2",s.bgClass,s.textClass),children:s.icon})};return C?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900/50 py-6",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsxs)(k.Zp,{className:"border dark:border-gray-800 shadow-lg",children:[(0,r.jsxs)("div",{className:"p-4 md:p-6 border-b dark:border-gray-800",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between md:justify-start gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Notifications"}),z>0&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-primary/10 text-primary",children:[z," new"]})]}),(0,r.jsx)(g.$,{variant:"outline",size:"icon",className:"md:hidden",onClick:()=>F(!M),children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(g.$,{variant:"outline",size:"sm",onClick:S,disabled:0===s.length,children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Mark all read"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Mark read"})]}),(0,r.jsxs)(g.$,{variant:"outline",size:"sm",onClick:U,disabled:0===s.length,className:"text-destructive hover:text-destructive",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Clear all"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Clear"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsx)(L.tU,{value:T,onValueChange:e=>E(e),className:"w-full max-w-[400px]",children:(0,r.jsxs)(L.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(L.Xi,{value:"all",children:["All",(0,r.jsxs)("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",s.length,")"]})]}),(0,r.jsxs)(L.Xi,{value:"unread",children:["Unread",z>0&&(0,r.jsx)("span",{className:"ml-2 bg-primary/20 text-primary rounded-full px-2 py-0.5 text-xs",children:z})]})]})}),(A||"all"!==T)&&(0,r.jsxs)(g.$,{variant:"ghost",size:"sm",onClick:()=>{O(null),E("all")},className:"text-muted-foreground hover:text-primary whitespace-nowrap",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Remove filters"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Reset"})]})]})]}),(0,r.jsx)(l.N,{children:M&&(0,r.jsx)(i.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"md:hidden border-b dark:border-gray-800",children:(0,r.jsxs)("div",{className:"p-4 space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Filter by Type"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["LIKE","COMMENT","FOLLOW"].map(e=>(0,r.jsxs)(g.$,{variant:A===e?"secondary":"ghost",className:(0,y.cn)("justify-start group",A===e&&"bg-primary/10"),onClick:()=>{O(A===e?null:e),F(!1)},children:[W(e),(0,r.jsxs)("span",{className:"ml-2 flex-1",children:[e.charAt(0)+e.slice(1).toLowerCase(),"s"]}),$[e]>0&&(0,r.jsx)("span",{className:"ml-auto text-xs text-muted-foreground",children:$[e]})]},e))})]})})}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"hidden md:block w-64 p-4 border-r dark:border-gray-800",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Filter by Type"}),(0,r.jsx)("div",{className:"space-y-2",children:["LIKE","COMMENT","FOLLOW"].map(e=>(0,r.jsxs)(g.$,{variant:A===e?"secondary":"ghost",className:(0,y.cn)("w-full justify-start group",A===e&&"bg-primary/10"),onClick:()=>O(A===e?null:e),children:[W(e),(0,r.jsxs)("span",{className:"ml-2 flex-1 text-left",children:[e.charAt(0)+e.slice(1).toLowerCase(),"s"]}),$[e]>0&&(0,r.jsx)("span",{className:"ml-auto text-xs text-muted-foreground",children:$[e]})]},e))})]}),(0,r.jsxs)("div",{className:"pt-4 border-t dark:border-gray-800",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Statistics"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total"}),(0,r.jsx)("span",{className:"font-medium",children:s.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Unread"}),(0,r.jsx)("span",{className:"font-medium",children:z})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Read"}),(0,r.jsx)("span",{className:"font-medium",children:s.length-z})]})]})]})]})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(_,{className:"h-[calc(100vh-16rem)]",children:0===s.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,r.jsx)("div",{className:"rounded-full bg-gray-100 dark:bg-gray-800 p-4 mb-4",children:(0,r.jsx)(m.A,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("h3",{className:"text-lg font-semibold text-center px-4",children:["No ","unread"===T?"unread ":"","notifications",A&&" of type ".concat(A.toLowerCase())]}),(0,r.jsx)("p",{className:"text-muted-foreground text-center mt-2 max-w-sm px-4",children:"unread"===T?"You're all caught up! Check back later for new notifications.":"When someone interacts with your content, you'll see it here."})]}):(0,r.jsx)("div",{className:"divide-y dark:divide-gray-800",children:s.map(e=>(0,r.jsx)("div",{className:(0,y.cn)("p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer group transition-colors",!e.is_read&&"bg-primary/5"),onClick:()=>V(e),children:(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsxs)(j.eu,{children:[(0,r.jsx)(j.BK,{src:e.sender.avatar||void 0}),(0,r.jsx)(j.q5,{children:e.sender.username[0].toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.message}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[W(e.notification_type),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,v.m)(new Date(e.created_at),{addSuffix:!0})}),!e.is_read&&(0,r.jsx)("span",{className:"text-xs text-primary font-medium",children:"New"})]})]}),(0,r.jsx)(N.A,{className:"h-5 w-5 text-muted-foreground transform transition-transform group-hover:translate-x-1"})]})},e.id))})})})]})]})})})}},35055:(e,s,a)=>{"use strict";a.d(s,{BK:()=>d,eu:()=>n,q5:()=>c});var r=a(95155),t=a(12115),l=a(74920),i=a(21567);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});n.displayName=l.bL.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",a),...t})});d.displayName=l._V.displayName;let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});c.displayName=l.H4.displayName},22130:(e,s,a)=>{"use strict";a.d(s,{Zp:()=>l});var r=a(95155),t=a(12115);let l=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:"rounded-lg border bg-card text-card-foreground shadow-sm ".concat(a),...t})});l.displayName="Card",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:"flex flex-col space-y-1.5 p-6 ".concat(a),...t})}).displayName="CardHeader",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:"text-2xl font-semibold leading-none tracking-tight ".concat(a),...t})}).displayName="CardTitle",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:"text-sm text-muted-foreground ".concat(a),...t})}).displayName="CardDescription",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:"p-6 pt-0 ".concat(a),...t})}).displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:"flex items-center p-6 pt-0 ".concat(a),...t})}).displayName="CardFooter"},62884:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>n});var r=a(95155),t=a(12115),l=a(58629),i=a(21567);let n=l.bL,d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.B8,{ref:s,className:(0,i.cn)("flex w-full border-b border-gray-200 dark:border-gray-700",a),...t})});d.displayName="TabsList";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.l9,{ref:s,className:(0,i.cn)("px-4 py-2 -mb-px text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300","data-[state=active]:text-primary-600 data-[state=active]:border-primary-600 dark:data-[state=active]:text-primary-400 dark:data-[state=active]:border-primary-400",a),...t})});c.displayName="TabsTrigger";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.UC,{ref:s,className:(0,i.cn)("mt-4",a),...t})});o.displayName="TabsContent"}},e=>{var s=s=>e(e.s=s);e.O(0,[4129,9219,2651,5037,8222,9782,3394,789,8441,1517,7358],()=>s(77725)),_N_E=e.O()}]);