(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{26708:(e,a,r)=>{Promise.resolve().then(r.bind(r,21159))},21159:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>C});var t=r(95155),s=r(12115),i=r(69606),l=r(85060),d=r(43415),o=r(99219),n=r(25683),c=r(76046),m=r(19148),x=r(73312),g=r(42649),h=r(55037),u=r(22783),b=r(12472),p=r(88012),y=r(689),j=r(41244),f=r.n(j),v=r(78994);async function N(e,a){let r=await new Promise((a,r)=>{let t=new Image;t.addEventListener("load",()=>a(t)),t.addEventListener("error",e=>r(e)),t.src=e}),t=document.createElement("canvas"),s=t.getContext("2d");if(!s)throw Error("No 2d context");return t.width=a.width,t.height=a.height,s.drawImage(r,a.x,a.y,a.width,a.height,0,0,a.width,a.height),new Promise((e,a)=>{t.toBlob(r=>{if(!r){a(Error("Canvas is empty"));return}e(r)},"image/jpeg")})}var w=r(5565);let k=d.z.object({phone:d.z.string().min(1,"Phone number is required"),location:d.z.string().min(1,"Location is required"),birth_date:d.z.string().min(1,"Birth date is required"),website:d.z.string().url().optional().or(d.z.literal("")),gender:d.z.enum(["MALE","FEMALE","OTHER","PREFER_NOT_TO_SAY"]),bio:d.z.string().max(500,"Bio must be less than 500 characters").optional(),occupation:d.z.string().min(1,"Occupation is required"),company:d.z.string().optional(),education:d.z.string().min(1,"Education is required")});function C(){var e;let a=(0,c.useRouter)(),[r,d]=(0,s.useState)(!1),[j,C]=(0,s.useState)(null),[E,P]=(0,s.useState)(!1),[_,z]=(0,s.useState)(!1),[R,S]=(0,s.useState)({x:0,y:0}),[A,O]=(0,s.useState)(1),[F,T]=(0,s.useState)(null),$=(0,s.useRef)(null),L=(0,s.useRef)(null),{register:q,handleSubmit:I,formState:{errors:Y},watch:B}=(0,i.mN)({resolver:(0,l.u)(k),defaultValues:{gender:"PREFER_NOT_TO_SAY"}}),M=async()=>{if(j&&F)try{let e=await N(j,F),a=new File([e],"avatar.jpg",{type:"image/jpeg"});await g.i$.updateAvatar(a),z(!1),h.oR.success("Profile photo updated")}catch(e){h.oR.error("Failed to update profile photo")}},D=async e=>{d(!0);try{await g.i$.updateProfile({phone:e.phone,location:e.location,birth_date:e.birth_date,website:e.website,gender:e.gender,bio:e.bio,occupation:e.occupation,company:e.company,education:e.education}),h.oR.success("Profile setup completed!"),a.push("/dashboard")}catch(e){h.oR.error(e.message||"Failed to complete profile setup")}finally{d(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-white via-primary-50/30 to-white dark:from-gray-950 dark:via-primary-950/10 dark:to-gray-950",children:[(0,t.jsx)("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Complete Your Profile"}),(0,t.jsx)(x.$,{type:"submit",form:"onboarding-form",disabled:r,className:"rounded-full px-6",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Complete Setup"})]})})}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:(0,t.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 space-y-8",children:(0,t.jsxs)("form",{id:"onboarding-form",onSubmit:I(D),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-700 dark:to-gray-800 ring-4 ring-white dark:ring-gray-800",children:j?(0,t.jsx)("div",{className:"relative w-full h-full",children:(0,t.jsx)(w.default,{src:j,alt:"Preview",fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 33vw"})}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(b.A,{className:"w-12 h-12 text-gray-400"})})}),(0,t.jsx)("button",{type:"button",onClick:()=>P(!0),className:"absolute bottom-0 right-0 p-2 rounded-full bg-primary-500 text-white hover:bg-primary-600 transition-colors",children:(0,t.jsx)(p.A,{className:"w-5 h-5"})})]}),(0,t.jsx)("input",{type:"file",ref:L,onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){let e=new FileReader;e.onloadend=()=>{C(e.result),z(!0)},e.readAsDataURL(r)}},accept:"image/*",className:"hidden"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(x.$,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=L.current)||void 0===e?void 0:e.click()},children:"Upload Photo"}),(0,t.jsx)(x.$,{type:"button",variant:"outline",onClick:()=>P(!0),children:"Take Photo"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Contact Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),(0,t.jsx)(m.p,{...q("phone"),type:"tel",className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",placeholder:"+1234567890"}),Y.phone&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.phone.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),(0,t.jsx)(m.p,{...q("location"),className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",placeholder:"City, Country"}),Y.location&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.location.message})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Personal Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Birth Date"}),(0,t.jsx)(m.p,{...q("birth_date"),type:"date",className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700"}),Y.birth_date&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.birth_date.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gender"}),(0,t.jsxs)("select",{...q("gender"),className:"w-full rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 py-2 px-3",children:[(0,t.jsx)("option",{value:"MALE",children:"Male"}),(0,t.jsx)("option",{value:"FEMALE",children:"Female"}),(0,t.jsx)("option",{value:"OTHER",children:"Other"}),(0,t.jsx)("option",{value:"PREFER_NOT_TO_SAY",children:"Prefer not to say"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),(0,t.jsx)("textarea",{...q("bio"),rows:4,className:"w-full rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 py-2 px-3 resize-none",placeholder:"Tell us about yourself..."}),Y.bio&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.bio.message}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[(null===(e=B("bio"))||void 0===e?void 0:e.length)||0,"/500 characters"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Website"}),(0,t.jsx)(m.p,{...q("website"),type:"url",className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",placeholder:"https://..."}),Y.website&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.website.message})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Professional Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Occupation"}),(0,t.jsx)(m.p,{...q("occupation"),className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",placeholder:"Your current role"}),Y.occupation&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.occupation.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company"}),(0,t.jsx)(m.p,{...q("company"),className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",placeholder:"Company name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Education"}),(0,t.jsx)(m.p,{...q("education"),className:"rounded-lg bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",placeholder:"Your highest education"}),Y.education&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:Y.education.message})]})]})]})]})})}),(0,t.jsx)(n.N,{children:E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",children:(0,t.jsxs)(o.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-lg mx-auto mt-20 bg-white dark:bg-gray-800 rounded-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Take Photo"}),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>P(!1),children:(0,t.jsx)(y.A,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"relative aspect-square",children:(0,t.jsx)(f(),{ref:$,screenshotFormat:"image/jpeg",className:"w-full"})}),(0,t.jsx)("div",{className:"p-4 flex justify-end",children:(0,t.jsx)(x.$,{onClick:()=>{if($.current){let e=$.current.getScreenshot();e&&(C(e),z(!0),P(!1))}},children:"Capture"})})]})})}),(0,t.jsx)(n.N,{children:_&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",children:(0,t.jsxs)(o.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-lg mx-auto mt-20 bg-white dark:bg-gray-800 rounded-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Adjust Photo"}),(0,t.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>z(!1),children:(0,t.jsx)(y.A,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"relative w-full aspect-square",children:(0,t.jsx)(v.Ay,{image:j||"",crop:R,zoom:A,aspect:1,onCropChange:S,onZoomChange:O,onCropComplete:(e,a)=>{T(a)},cropShape:"round",showGrid:!1})}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-sm",children:"Zoom"}),(0,t.jsx)("input",{type:"range",value:A,min:1,max:3,step:.1,onChange:e=>O(Number(e.target.value)),className:"w-full"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(x.$,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,t.jsx)(x.$,{onClick:M,children:"Save Photo"})]})]})]})})})]})}},19148:(e,a,r)=>{"use strict";r.d(a,{p:()=>l});var t=r(95155),s=r(12115),i=r(21567);let l=s.forwardRef((e,a)=>{let{className:r,type:s,...l}=e;return(0,t.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...l})});l.displayName="Input"}},e=>{var a=a=>e(e.s=a);e.O(0,[4129,9219,2651,5037,5565,9734,1941,789,8441,1517,7358],()=>a(26708)),_N_E=e.O()}]);